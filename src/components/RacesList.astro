---
import { getCollection, type CollectionEntry } from 'astro:content';
import { RaceCard } from "@/components/RaceCard";

async function getAllRaces() {
  const races = await getCollection('races');
  return races.sort((a, b) => 
    new Date(a.data.date).getTime() - new Date(b.data.date).getTime()
  );
}

const races = await getAllRaces();
---

<div class="max-w-5xl mx-auto px-8 min-h-screen">
  <div class="py-6 space-y-4">
    {races.map((race) => (
      <div class="transform transition-all duration-300 hover:translate-y-[-2px] hover:shadow-2xl">
        <RaceCard race={race} client:load />
      </div>
    ))}
  </div>

  {races.length === 0 && (
    <div class="text-center py-12">
      <p class="text-lg text-neutral-300">No upcoming races at the moment. Check back soon!</p>
    </div>
  )}
</div> 